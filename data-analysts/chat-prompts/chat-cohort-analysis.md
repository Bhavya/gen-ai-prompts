# Cohort Analysis - Chat Prompt

## Purpose
Design and execute cohort analysis to understand user behavior patterns, retention trends, and lifecycle performance across different customer segments.

## Chat Prompt

```
I need help designing and executing a comprehensive cohort analysis to understand user behavior patterns, retention trends, and how different customer segments perform over time. Let's create an analysis that provides actionable insights for business strategy.

## Business Context:
- **Business Type**: [SaaS, e-commerce, subscription, marketplace, mobile app, etc.]
- **Analysis Purpose**: [Retention analysis, LTV calculation, product optimization, churn reduction]
- **Key Business Questions**: [What specific questions do you want cohort analysis to answer?]
- **Decision Impact**: [How will cohort insights inform business decisions?]
- **Stakeholder Audience**: [Who will use these insights? Product, marketing, executives?]

## Cohort Definition:

### Cohort Grouping Strategy:
**Time-Based Cohorts**:
- [ ] **Monthly Cohorts**: [Users who joined in same month]
- [ ] **Weekly Cohorts**: [Users who joined in same week]
- [ ] **Quarterly Cohorts**: [Users who joined in same quarter]
- [ ] **Custom Time Periods**: [Specific periods relevant to business cycles]

**Behavior-Based Cohorts**:
- [ ] **Acquisition Channel**: [Organic, paid, referral, social media]
- [ ] **Product Usage**: [Feature adoption, usage intensity, engagement level]
- [ ] **Customer Segment**: [SMB, enterprise, freemium, paid]
- [ ] **Geographic**: [Region, country, city, timezone]

**Value-Based Cohorts**:
- [ ] **Revenue Tiers**: [Low, medium, high value customers]
- [ ] **Plan Types**: [Free, basic, premium, enterprise]
- [ ] **Purchase Behavior**: [First purchase amount, purchase frequency]
- [ ] **Customer Lifetime Value**: [Predicted or actual LTV segments]

### Cohort Entry Criteria:
**Primary Event** (Cohort Definition):
- **Event Name**: [What action defines cohort membership?]
- **Event Definition**: [Specific criteria for the defining event]
- **Business Rationale**: [Why this event is meaningful for analysis]
- **Data Source**: [Where this event is tracked]

**Examples**:
- **User Registration**: [Account creation, signup completion]
- **First Purchase**: [Initial transaction, first payment]
- **Product Activation**: [First meaningful use, onboarding completion]
- **Feature Adoption**: [First use of key feature, upgrade to paid plan]

## Analysis Framework:

### Retention Analysis:
**Retention Definition**:
- **Return Action**: [What constitutes "returning" or "active"?]
- **Time Periods**: [Daily, weekly, monthly retention tracking]
- **Minimum Activity**: [Threshold for considering user "retained"]
- **Measurement Windows**: [How long to track retention: 30, 60, 90 days?]

**Retention Metrics**:
- **Day 1 Retention**: [Users who return the day after cohort entry]
- **Day 7 Retention**: [Users still active after 1 week]
- **Day 30 Retention**: [Users still active after 1 month]
- **Long-term Retention**: [3-month, 6-month, 1-year retention]

**Retention Curve Analysis**:
- **Retention Decay**: [How quickly do users drop off?]
- **Plateau Points**: [Where does retention stabilize?]
- **Cohort Comparisons**: [Which cohorts retain better?]
- **Seasonal Patterns**: [Time-based retention variations]

### Revenue Cohort Analysis:
**Revenue Metrics by Cohort**:
- **Revenue per Cohort**: [Total revenue generated by each cohort]
- **Average Revenue per User (ARPU)**: [Revenue per user in each cohort]
- **Customer Lifetime Value (CLV)**: [Projected and actual CLV by cohort]
- **Revenue Retention**: [Percentage of revenue retained over time]

**Revenue Patterns**:
- **Monetization Curves**: [How revenue develops over customer lifetime]
- **Expansion Revenue**: [Upselling and cross-selling patterns]
- **Churn Impact**: [Revenue loss due to customer churn]
- **Cohort LTV Comparison**: [Which cohorts are most valuable?]

### Behavioral Cohort Analysis:
**Engagement Metrics**:
- **Usage Frequency**: [How often do cohort members use product?]
- **Feature Adoption**: [Which features do different cohorts adopt?]
- **Engagement Depth**: [How deeply do users engage with product?]
- **Activity Patterns**: [When and how do users interact with product?]

**Progression Analysis**:
- **User Journey Mapping**: [How do cohorts progress through product?]
- **Milestone Achievement**: [Key milestones reached by cohort]
- **Conversion Funnels**: [Cohort performance through conversion steps]
- **Feature Usage Evolution**: [How feature usage changes over time]

## Data Requirements:

### Essential Data Elements:
**User Identification**:
- **User ID**: [Unique identifier for each user]
- **Cohort Entry Date**: [When user joined the cohort]
- **User Attributes**: [Demographic, firmographic, or behavioral attributes]
- **Acquisition Source**: [How user was acquired]

**Activity Data**:
- **Event Timestamps**: [When actions were taken]
- **Event Types**: [Different types of user actions]
- **Event Properties**: [Additional context about actions]
- **Session Data**: [Login/logout, session duration]

**Transaction Data** (if applicable):
- **Purchase Date**: [When transactions occurred]
- **Purchase Amount**: [Value of each transaction]
- **Product/Plan**: [What was purchased]
- **Payment Method**: [How payment was made]

### Data Quality Considerations:
**Data Validation**:
- **Completeness**: [Are all required fields populated?]
- **Accuracy**: [Are timestamps and amounts correct?]
- **Consistency**: [Are user IDs consistent across systems?]
- **Timeliness**: [How fresh is the data for analysis?]

**Data Preparation**:
- **User Deduplication**: [Handling multiple accounts per user]
- **Event Standardization**: [Consistent event definitions]
- **Time Zone Handling**: [Consistent time zone treatment]
- **Outlier Treatment**: [How to handle extreme values]

## Analysis Implementation:

### SQL Query Framework:
**Basic Cohort Query Structure**:
```sql
-- Example cohort retention query
WITH cohort_table AS (
  SELECT 
    user_id,
    DATE_TRUNC('month', first_activity_date) as cohort_month
  FROM users
),
user_activities AS (
  SELECT 
    user_id,
    DATE_TRUNC('month', activity_date) as period_month
  FROM user_events
),
cohort_data AS (
  SELECT 
    c.cohort_month,
    a.period_month,
    COUNT(DISTINCT c.user_id) as users
  FROM cohort_table c
  LEFT JOIN user_activities a ON c.user_id = a.user_id
  GROUP BY c.cohort_month, a.period_month
)
SELECT 
  cohort_month,
  period_month,
  users,
  ROUND(users * 100.0 / FIRST_VALUE(users) OVER (
    PARTITION BY cohort_month 
    ORDER BY period_month
  ), 2) as retention_rate
FROM cohort_data
ORDER BY cohort_month, period_month;
```

### Analysis Steps:
**Step 1: Cohort Definition**
- Define cohort entry criteria
- Identify cohort periods (monthly, weekly, etc.)
- Create cohort assignment logic
- Validate cohort membership

**Step 2: Metric Calculation**
- Calculate retention rates by period
- Compute revenue metrics by cohort
- Analyze engagement patterns
- Generate cohort performance metrics

**Step 3: Comparative Analysis**
- Compare cohorts across time periods
- Identify high and low performing cohorts
- Analyze trends and patterns
- Segment cohorts by attributes

## Visualization Strategy:

### Cohort Charts:
**Retention Heatmap**:
- **Rows**: [Cohort periods (months/weeks)]
- **Columns**: [Time since cohort entry (periods 0, 1, 2, etc.)]
- **Values**: [Retention percentages with color coding]
- **Insights**: [Visual patterns in retention across cohorts]

**Retention Curves**:
- **X-axis**: [Time periods since cohort entry]
- **Y-axis**: [Retention percentage]
- **Lines**: [Different cohorts or cohort segments]
- **Insights**: [Retention decay patterns and cohort comparisons]

**Revenue Cohort Charts**:
- **Cumulative Revenue**: [Revenue accumulation over customer lifetime]
- **ARPU Trends**: [Average revenue per user by cohort over time]
- **LTV Progression**: [How customer lifetime value develops]

### Key Visualizations:
1. **Cohort Retention Table**: [Detailed retention percentages]
2. **Retention Curve Comparison**: [Visual comparison of cohort performance]
3. **Revenue by Cohort**: [Financial performance across cohorts]
4. **Cohort Size Distribution**: [Number of users in each cohort]

## Insight Generation:

### Pattern Recognition:
**Retention Patterns**:
- **Improving Cohorts**: [Are newer cohorts performing better?]
- **Seasonal Effects**: [Do certain times of year produce better cohorts?]
- **Channel Impact**: [Which acquisition channels drive better retention?]
- **Product Changes**: [How do product updates affect cohort performance?]

**Revenue Patterns**:
- **Monetization Speed**: [How quickly do cohorts start generating revenue?]
- **Value Development**: [How does customer value grow over time?]
- **Cohort LTV Trends**: [Are newer cohorts more valuable?]
- **Revenue Concentration**: [What percentage of revenue comes from top cohorts?]

### Actionable Insights:
**Product Optimization**:
- **Onboarding Improvement**: [Which cohorts struggle with early retention?]
- **Feature Development**: [What features drive long-term retention?]
- **User Experience**: [How can we improve new user experience?]
- **Activation Optimization**: [How to get users to key activation events?]

**Marketing Optimization**:
- **Channel Performance**: [Which channels produce highest LTV customers?]
- **Campaign Timing**: [When to launch campaigns for best cohort performance?]
- **Audience Targeting**: [Which segments should marketing focus on?]
- **Budget Allocation**: [How to distribute spend across channels?]

## Business Applications:

### Strategic Planning:
**Growth Forecasting**:
- **Revenue Projections**: [Using cohort LTV for revenue forecasting]
- **User Growth Modeling**: [Predicting future user base growth]
- **Capacity Planning**: [Resource needs based on cohort growth]
- **Investment Decisions**: [ROI analysis using cohort performance]

**Product Development**:
- **Feature Prioritization**: [Features that improve cohort performance]
- **User Experience**: [Onboarding and activation improvements]
- **Retention Programs**: [Initiatives to improve long-term retention]
- **Churn Prevention**: [Early warning signals from cohort analysis]

### Operational Optimization:
**Customer Success**:
- **Risk Identification**: [Cohorts at risk of churning]
- **Success Program Design**: [Tailored programs for different cohorts]
- **Resource Allocation**: [Where to focus customer success efforts]
- **Milestone Tracking**: [Key success metrics by cohort]

## Advanced Analysis:

### Segmented Cohort Analysis:
**Multi-dimensional Cohorts**:
- **Acquisition Channel + Time**: [Performance by channel and signup period]
- **Geography + Product Tier**: [Regional and plan-based cohort performance]
- **User Type + Behavior**: [Different user personas and their retention]

**Cohort Comparison Testing**:
- **A/B Test Cohorts**: [Comparing cohorts from different experiments]
- **Feature Release Impact**: [Before/after feature launch cohorts]
- **Campaign Effectiveness**: [Cohorts from different marketing campaigns]

### Predictive Cohort Modeling:
**Cohort Forecasting**:
- **Retention Prediction**: [Predicting future retention based on early signals]
- **LTV Modeling**: [Early LTV prediction using cohort patterns]
- **Churn Prediction**: [Using cohort trends to predict individual churn]
- **Revenue Forecasting**: [Future revenue based on cohort performance]

## Specific Guidance Needed:

1. **Cohort Definition**: How should I define cohorts for my specific business model?
2. **Metric Selection**: Which cohort metrics are most important for my business goals?
3. **Analysis Tools**: What tools are best for cohort analysis at my scale?
4. **Insight Translation**: How do I turn cohort insights into actionable business strategies?
5. **Implementation**: What's the best approach to implement cohort tracking?
6. **Reporting**: How should I present cohort insights to different stakeholders?

## Current Situation:
- **Available Data**: [What user and activity data do you currently have?]
- **Tracking Infrastructure**: [Current analytics and data collection setup]
- **Business Model**: [How your business generates revenue from users]
- **Key Challenges**: [Specific retention or growth challenges you're facing]
- **Success Metrics**: [How you currently measure user and business success]

Let's design a cohort analysis that provides deep insights into user behavior and drives strategic business improvements!
```

## Usage Tips
- Start with clear business questions that cohort analysis should answer
- Choose cohort definitions that align with your business model and user journey
- Focus on actionable insights rather than just interesting patterns
- Compare cohorts across multiple dimensions to understand what drives performance
- Use cohort insights to inform product, marketing, and customer success strategies

## Example Usage

"I need help designing cohort analysis for our B2B SaaS product. We want to understand how user retention varies by acquisition channel and signup month, and identify what drives long-term customer value. Have 2 years of data including user signups, feature usage, and subscription revenue. Key questions: Which channels produce stickiest customers? Are newer cohorts performing better? What early behaviors predict long-term retention? Need to present findings to executive team to inform 2024 customer acquisition strategy."